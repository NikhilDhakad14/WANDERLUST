<%  layout("/layouts/boilerplate") %>

<body>
     <div id="filters" >

      <div class="filter">
      <a href="/listings/category?category=Luxury-hotels">
      <div><i class="fa-solid fa-city"></i>
      <p>Luxury-hotels</p>
      </div>
      </a>
      </div>


      <div class="filter">
      <a href="/listings/category?category=Custle">
      <div>
      <i class="fa-brands fa-fort-awesome"></i>
      <p>Custles</p>
      </div> 
       </a> 
      </div>


      <div class="filter">
          <a href="/listings/category?category=Amazing-pools">
      <div><i class="fa-solid fa-person-swimming"></i>
      <p>Amazing Pools</p>
      </div>
      </a>
      </div>


      <div class="filter">
      <a href="/listings/category?category=Mountains">
      <div><i class="fa-solid fa-mountain-city"></i>
      <p>Mountains</p>
      </div>
      </a>
      </div>


      <div class="filter">
      <a href="/listings/category?category=Camping">
      <div><i class="fa-solid fa-campground"></i>
      <p>Camping</p>
      </div>
      </a>
      </div>


      <div class="filter">
      <a href="/listings/category?category=Farms">
      <div><i class="fa-solid fa-cow"></i>
      <p>Farms</p>
      </div>
      </a>
      </div>


      <div class="filter">
      <a href="/listings/category?category=Arctic">
      <div><i class="fa-solid fa-snowflake"></i>
      <p>Arctic</p>
      </div>
      </a>
      </div>


      <div class="filter">
      <a href="/listings/category?category=Beaches">
      <div><i class="fa-solid fa-house-flood-water"></i>
      <p>Beaches</p>
      </div>
      </a>
      </div>
     <div class="tax-toggle">
     <div class="form-check-reverse form-switch">
      <input type="checkbox" class="form-check-input" role="switch" id="flexSwitchCheckDefault">
      <label for="flexSwitchCheckDefault" class="form-check-lable">Display total with taxes</label>
     </div>
       </div>
     </div>
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 mt-3">
          <% for(let listing of allListings){%>
            <a href="/listings/<%=listing._id%>" class="listing_link">
     <div class=" card listing-card" >
  <img src="<%=listing.image.url%>" class="card-img-top" alt="listing_image" style="height: 20rem;" />
  <div class="card-img-overlay">N</div>
  <div class="card-body">
    <p class="card-text">
       <B> <%=listing.title %></B>
    <br>
    &#8377;<%= Number(listing.price).toLocaleString("en-IN") %>/night
    <i class="tax-info">&nbsp; &nbsp;+8%GST</i>
    </div>
    </div>
    </a>

  <%}%>

  <% if (allListings.length === 0) { %>
  <p>No listings found</p>
  <% } %>
    </div>  

    <script>
      let taxSwitch=document.getElementById("flexSwitchCheckDefault");
      taxSwitch.addEventListener("click",()=>{
        let taxInfo= document.getElementsByClassName("tax-info");
       for(info of taxInfo){
        if(info.style.display != "inline"){
       info.style.display="inline"; 
       }else{
        info.style.display="none"
       }
      }});
    </script> 
</body>